@if (visible) {
  <div class="modal-container">
    <div class="modal">
      <div class="modal-header">
        <h2>{{ formUser.users_id ? 'Editar Usuario' : 'Nuevo Usuario' }}</h2>
        <p>{{ formUser.users_id ? 'Modifica los datos del usuario' : 'Completa el formulario para crear un nuevo usuario'
        }}</p>
        <button class="close-button" aria-label="Cerrar" (click)="onCancel()">×</button>
      </div>
      <!-- Imagen de perfil arriba -->
      <div class="profile-image-container">
        <img [src]="previewImage || 'assets/img/default-profile.png'" class="profile-image" />
        <label for="fileInput" class="upload-btn">
          <i class="ri-folder-image-fill"></i> Cambiar foto
        </label>
        <input type="file" id="fileInput" (change)="onFileSelected($event)" accept="image/*" hidden />
      </div>
      <form class="form-grid">
        <div class="form-group">
          <label>Nombre</label>
          <input type="text" class="input" placeholder="Ingrese el nombre" [(ngModel)]="formUser.name" name="name" />
        </div>
        <div class="form-group">
          <label>Apellido</label>
          <input type="text" class="input" placeholder="Ingrese el apellido" [(ngModel)]="formUser.last_name"
            name="last_name" />
          </div>
          <div class="form-group">
            <label>Tipo Documento</label>
            <select class="input" [(ngModel)]="formUser.document_type" name="document_type">
              <option value="DNI">DNI</option>
              <option value="CNE">CNE</option>
            </select>
          </div>
          <div class="form-group">
            <label>Número de Documento</label>
            <input type="text" class="input" [attr.maxlength]="formUser.document_type === 'DNI' ? 8 : 20"
              [placeholder]="formUser.document_type === 'DNI' ? 'Ingrese DNI' : 'Ingrese CNE'"
              [(ngModel)]="formUser.document_number" name="document_number" />
            </div>
            <div class="form-group">
              <label>Teléfono</label>
              <input type="text" class="input" placeholder="Ingrese el teléfono" [(ngModel)]="formUser.cellphone"
                name="cellphone" />
              </div>
              <div class="form-group">
                <label>Email</label>
                <input type="email" class="input" placeholder="Ingrese el email" [(ngModel)]="formUser.email" name="email" />
              </div>
              <div class="form-group">
                <label>Contraseña</label>
                <div class="input-password-wrapper">
                  <input [type]="showPassword ? 'text' : 'password'" class="input" placeholder="Ingrese la contraseña"
                    [(ngModel)]="formUser.password" name="password" />
                    <button type="button" class="toggle-password-btn" (click)="showPassword = !showPassword">
                      <i [ngClass]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
                    </button>
                  </div>
                </div>
                <div class="form-group">
                  <label>Rol</label>
                  <select class="input" [(ngModel)]="formUser.role" name="role">
                    <option value="Admin">Admin</option>
                    <option value="Cocinero">Cocinero</option>
                    <option value="Mesero">Mesero</option>
                    <option value="Cajero">Cajero</option>
                    <option value="Cliente">Cliente</option>
                  </select>
                </div>
              </form>
              <div class="modal-footer">
                <button class="btn cancel" type="button" (click)="onCancel()">Cancelar</button>
                <button class="btn confirm" type="button" (click)="onSubmit()">
                  {{ formUser.users_id ? 'Actualizar usuario' : 'Crear usuario' }}
                </button>
              </div>
            </div>
          </div>
        }